<html class="js csstransforms3d">
  <head>
    <meta charSet="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>
      F# Core API Docs | MailboxProcessor<'Msg>
    </title>
    <link rel="icon" type="image/png" sizes="32x32" href="https://baronfel.github.io/fsharp-core-api-docs//static/images/favicon.png"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/nucleus.css"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/fontawesome-all.min.css"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/hybrid.css"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/featherlight.min.css"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/perfect-scrollbar.min.css"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/auto-complete.css"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/atom-one-dark-reasonable.css"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/theme.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/atom-one-dark.min.css"/>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/css/theme-green.css"/>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/jquery-3.3.1.min.js"></script>
  </head>
  <body>
    <nav id="sidebar">
      <div id="header-wrapper">
        <div id="header">
          <h2 id="logo">
            F# Core API Docs
          </h2>
        </div>
        <div class="searchbox">
          <label for="search-by">
            <i class="fas fa-search"></i>
          </label>
          <input data-search-input="" id="search-by" type="search" placeholder="Search..."/>
          <span data-search-clear="">
            <i class="fas fa-times"></i>
          </span>
        </div>
        <script type="text/javascript" src="https://baronfel.github.io/fsharp-core-api-docs//static/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://baronfel.github.io/fsharp-core-api-docs//static/js/auto-complete.js"></script>
        <script type="text/javascript">
          var baseurl ='https://baronfel.github.io/fsharp-core-api-docs/'
        </script>
        <script type="text/javascript" src="https://baronfel.github.io/fsharp-core-api-docs//static/js/search.js"></script>
        <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/highlight.pack.js"></script>
        <script>
          hljs.initHighlightingOnLoad();
        </script>
      </div>
      <div class="highlightable">
        <ul class="topics">
          <li id="menu-refs" class="dd-item menu-group-link menu-group-link-active">
            <a>
              API References
            </a>
          </li>
        </ul>
        <ul id="submenu-refs" class="submenu submenu-active">
          <li>
            <a href="https://baronfel.github.io/fsharp-core-api-docs//reference/FSharp.Core/index.html" class="padding">
              FSharp.Core
            </a>
          </li>
        </ul>
        <section id="shortcuts">
          <h3>
            Shortcuts
          </h3>
          <ul>
            <li>
              <a class="padding" href="/fsharp-core-api-docs">
                <i class="fas fa-home"></i>
                Home
              </a>
            </li>
            <li>
              <a class="padding" href="http://fsharp.org">
                <i class="fas fa-cubes"></i>
                F# Software Foundation
              </a>
            </li>
            <li>
              <a class="padding" href="https://github.com/dotnet/fsharp">
                <i class="fab fa-github"></i>
                GitHub repo
              </a>
            </li>
          </ul>
        </section>
        <section id="footer">
          <p>Built with <a href="https://github.com/ionide/Fornax">Fornax</a>
        </section>
      </div>
    </nav>
    <section id="body">
      <div id="overlay"></div>
      <div class="padding highlightable">
        <div id="body-inner">
          <span id="sidebar-toggle-span">
            <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
              <i class="fas fa-bars"></i>
               navigation
            </a>
          </span>
          <div class="api-page">
            <h2>
              MailboxProcessor<'Msg>
            </h2>
            <b>
              Namespace: 
            </b>
            <a href="Microsoft.FSharp.Control.html">
              Microsoft.FSharp.Control
            </a>
            <br/>
            <b>
              Parent: 
            </b>
            <a href="Microsoft.FSharp.Control.html">
              Microsoft.FSharp.Control
            </a>
            <span>
              <div class="comment"></br><p class='summary'>A message-processing agent which executes an asynchronous computation.</p><h2>Remarks</h2><p class='remarks'>The agent encapsulates a message queue that supports multiple-writers and 
 a single reader agent. Writers send messages to the agent by using the Post 
 method and its variations.

 The agent may wait for messages using the Receive or TryReceive methods or
 scan through all available messages using the Scan or TryScan method.</p></div>
            </span>
            <br/>
            <b>
              Attributes:
            </b>
            <br/>
            <code>
              SealedAttribute
            </code>
            <br/>
            <code>
              AutoSerializableAttribute
            </code>
            <br/>
            <code>
              CompiledNameAttribute
            </code>
            <br/>
            <table>
              <tr>
                <th width="35%">
                  Name
                </th>
                <th width="65%">
                  Description
                </th>
              </tr>
              <tr>
                <td colSpan="3">
                  <b>
                    Constructors
                  </b>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    ( .ctor )
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (body:(MailboxProcessor<'Msg> -> Async<unit>) * cancellationToken:CancellationToken option) -> MailboxProcessor<'Msg>
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Creates an agent. The  function is used to generate the asynchronous 
 computation executed by the agent. This function is not executed until 
  is called.</p><h2>Parameters</h2><dl><dt><span class='parameter'>body</span></dt><dd><p>The function to produce an asynchronous computation that will be executed
 as the read loop for the MailboxProcessor when Start is called.</p></dd><dt><span class='parameter'>cancellationToken</span></dt><dd><p>An optional cancellation token for the body.
 Defaults to Async.DefaultCancellationToken.</p></dd></dl><p class='returns'>Returns: The created MailboxProcessor.</p></div>
                </td>
              </tr>
              <tr>
                <td colSpan="3">
                  <b>
                    Instance Members
                  </b>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    Post
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  message:'Msg -> unit
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Posts a message to the message queue of the MailboxProcessor, asynchronously.</p><h2>Parameters</h2><dl><dt><span class='parameter'>message</span></dt><dd><p>The message to post.</p></dd></dl></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    PostAndAsyncReply
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (buildMessage:(AsyncReplyChannel<'Reply> -> 'Msg) * timeout:int option) -> Async<'Reply>
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Posts a message to an agent and await a reply on the channel, asynchronously.</p><h2>Parameters</h2><dl><dt><span class='parameter'>buildMessage</span></dt><dd><p>The function to incorporate the AsyncReplyChannel into
 the message to be sent.</p></dd><dt><span class='parameter'>timeout</span></dt><dd><p>An optional timeout parameter (in milliseconds) to wait for a reply message.
 Defaults to -1 which corresponds to System.Threading.Timeout.Infinite.</p></dd></dl><p class='returns'>Returns: An asynchronous computation that will wait for the reply from the agent.</p><h2>Remarks</h2><p class='remarks'>The message is generated by applying  to a new reply channel 
 to be incorporated into the message. The receiving agent must process this 
 message and invoke the Reply method on this reply channel precisely once.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    PostAndReply
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (buildMessage:(AsyncReplyChannel<'Reply> -> 'Msg) * timeout:int option) -> 'Reply
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Posts a message to an agent and await a reply on the channel, synchronously.</p><h2>Parameters</h2><dl><dt><span class='parameter'>buildMessage</span></dt><dd><p>The function to incorporate the AsyncReplyChannel into
 the message to be sent.</p></dd><dt><span class='parameter'>timeout</span></dt><dd><p>An optional timeout parameter (in milliseconds) to wait for a reply message.
 Defaults to -1 which corresponds to System.Threading.Timeout.Infinite.</p></dd></dl><p class='returns'>Returns: The reply from the agent.</p><h2>Remarks</h2><p class='remarks'>The message is generated by applying  to a new reply channel 
 to be incorporated into the message. The receiving agent must process this 
 message and invoke the Reply method on this reply channel precisely once.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    PostAndTryAsyncReply
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (buildMessage:(AsyncReplyChannel<'Reply> -> 'Msg) * timeout:int option) -> Async<'Reply option>
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Like AsyncPostAndReply, but returns None if no reply within the timeout period.</p><h2>Parameters</h2><dl><dt><span class='parameter'>buildMessage</span></dt><dd><p>The function to incorporate the AsyncReplyChannel into
 the message to be sent.</p></dd><dt><span class='parameter'>timeout</span></dt><dd><p>An optional timeout parameter (in milliseconds) to wait for a reply message.
 Defaults to -1 which corresponds to System.Threading.Timeout.Infinite.</p></dd></dl><p class='returns'>Returns: An asynchronous computation that will return the reply or None if the timeout expires.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    Receive
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (timeout:int option) -> Async<'Msg>
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Waits for a message. This will consume the first message in arrival order.</p><h2>Parameters</h2><dl><dt><span class='parameter'>timeout</span></dt><dd><p>An optional timeout in milliseconds. Defaults to -1 which corresponds
 to System.Threading.Timeout.Infinite.</p></dd></dl><p class='returns'>Returns: An asynchronous computation that returns the received message.</p><h2>Remarks</h2><p class='remarks'>This method is for use within the body of the agent. 

 This method is for use within the body of the agent. For each agent, at most 
 one concurrent reader may be active, so no more than one concurrent call to 
 Receive, TryReceive, Scan and/or TryScan may be active.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    Scan
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (scanner:('Msg -> Async<'T> option) * timeout:int option) -> Async<'T>
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Scans for a message by looking through messages in arrival order until  
 returns a Some value. Other messages remain in the queue.</p><h2>Parameters</h2><dl><dt><span class='parameter'>scanner</span></dt><dd><p>The function to return None if the message is to be skipped
 or Some if the message is to be processed and removed from the queue.</p></dd><dt><span class='parameter'>timeout</span></dt><dd><p>An optional timeout in milliseconds. Defaults to -1 which corresponds
 to System.Threading.Timeout.Infinite.</p></dd></dl><p class='returns'>Returns: An asynchronous computation that scanner built off the read message.</p><h2>Remarks</h2><p class='remarks'>Returns None if a timeout is given and the timeout is exceeded.

 This method is for use within the body of the agent. For each agent, at most 
 one concurrent reader may be active, so no more than one concurrent call to 
 Receive, TryReceive, Scan and/or TryScan may be active.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    Start
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  unit -> unit
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Starts the agent.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    TryPostAndReply
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (buildMessage:(AsyncReplyChannel<'Reply> -> 'Msg) * timeout:int option) -> 'Reply option
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Like PostAndReply, but returns None if no reply within the timeout period.</p><h2>Parameters</h2><dl><dt><span class='parameter'>buildMessage</span></dt><dd><p>The function to incorporate the AsyncReplyChannel into
 the message to be sent.</p></dd><dt><span class='parameter'>timeout</span></dt><dd><p>An optional timeout parameter (in milliseconds) to wait for a reply message.
 Defaults to -1 which corresponds to System.Threading.Timeout.Infinite.</p></dd></dl><p class='returns'>Returns: The reply from the agent or None if the timeout expires.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    TryReceive
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (timeout:int option) -> Async<'Msg option>
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Waits for a message. This will consume the first message in arrival order.</p><h2>Parameters</h2><dl><dt><span class='parameter'>timeout</span></dt><dd><p>An optional timeout in milliseconds. Defaults to -1 which
 corresponds to System.Threading.Timeout.Infinite.</p></dd></dl><p class='returns'>Returns: An asynchronous computation that returns the received message or
 None if the timeout is exceeded.</p><h2>Remarks</h2><p class='remarks'>This method is for use within the body of the agent. 

 Returns None if a timeout is given and the timeout is exceeded.

 This method is for use within the body of the agent. For each agent, at most 
 one concurrent reader may be active, so no more than one concurrent call to 
 Receive, TryReceive, Scan and/or TryScan may be active.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    TryScan
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (scanner:('Msg -> Async<'T> option) * timeout:int option) -> Async<'T option>
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Scans for a message by looking through messages in arrival order until  
 returns a Some value. Other messages remain in the queue.</p><h2>Parameters</h2><dl><dt><span class='parameter'>scanner</span></dt><dd><p>The function to return None if the message is to be skipped
 or Some if the message is to be processed and removed from the queue.</p></dd><dt><span class='parameter'>timeout</span></dt><dd><p>An optional timeout in milliseconds. Defaults to -1 which corresponds
 to System.Threading.Timeout.Infinite.</p></dd></dl><p class='returns'>Returns: An asynchronous computation that scanner built off the read message.</p><h2>Remarks</h2><p class='remarks'>This method is for use within the body of the agent. For each agent, at most 
 one concurrent reader may be active, so no more than one concurrent call to 
 Receive, TryReceive, Scan and/or TryScan may be active.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    add_Error
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  Handler<Exception> -> unit
                  <br/>
                  <b>
                    Attributes:
                  </b>
                  <code>
                    CLIEventAttribute
                  </code>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Occurs when the execution of the agent results in an exception.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    remove_Error
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  Handler<Exception> -> unit
                  <br/>
                  <b>
                    Attributes:
                  </b>
                  <code>
                    CLIEventAttribute
                  </code>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Occurs when the execution of the agent results in an exception.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    DefaultTimeout
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  unit -> int
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Raises a timeout exception if a message not received in this amount of time. By default
 no timeout is used.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    DefaultTimeout
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  unit -> unit
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Raises a timeout exception if a message not received in this amount of time. By default
 no timeout is used.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    Error
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  IEvent<Exception>
                  <br/>
                  <b>
                    Attributes:
                  </b>
                  <code>
                    CLIEventAttribute
                  </code>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Occurs when the execution of the agent results in an exception.</p></div>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    CurrentQueueLength
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  int
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Returns the number of unprocessed messages in the message queue of the agent.</p></div>
                </td>
              </tr>
              <tr>
                <td colSpan="3">
                  <b>
                    Static Members
                  </b>
                </td>
              </tr>
              <tr>
                <td>
                  <code>
                    Start
                  </code>
                  <br/>
                  <br/>
                  <b>
                    Signature: 
                  </b>
                  (body:(MailboxProcessor<'Msg> -> Async<unit>) * cancellationToken:CancellationToken option) -> MailboxProcessor<'Msg>
                  <br/>
                </td>
                <td>
                  <div class="comment"></br><p class='summary'>Creates and starts an agent. The  function is used to generate the asynchronous 
 computation executed by the agent.</p><h2>Parameters</h2><dl><dt><span class='parameter'>body</span></dt><dd><p>The function to produce an asynchronous computation that will be executed
 as the read loop for the MailboxProcessor when Start is called.</p></dd><dt><span class='parameter'>cancellationToken</span></dt><dd><p>An optional cancellation token for the body.
 Defaults to Async.DefaultCancellationToken.</p></dd></dl><p class='returns'>Returns: The created MailboxProcessor.</p></div>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/clipboard.min.js"></script>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/perfect-scrollbar.min.js"></script>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/jquery.sticky.js"></script>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/featherlight.min.js"></script>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/modernizr.custom-3.6.0.js"></script>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/learn.js"></script>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/js/hugo-learn.js"></script>
    <link rel="stylesheet" href="https://baronfel.github.io/fsharp-core-api-docs//static/mermaid/mermaid.css"/>
    <script src="https://baronfel.github.io/fsharp-core-api-docs//static/mermaid/mermaid.js"></script>
    <script>
      mermaid.initialize({ startOnLoad: true });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/languages/fsharp.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad()
    </script>
  </body>
</html>